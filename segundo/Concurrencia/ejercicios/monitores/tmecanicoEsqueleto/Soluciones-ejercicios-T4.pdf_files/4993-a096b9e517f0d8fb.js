(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4993],{24304:function(e,t,n){"use strict";n.d(t,{V:function(){return removeArtifact}});var o=n(93429);let removeArtifactFromCache=(e,t)=>{if(!e)return;let n=e.pages.map(e=>({...e,data:e.data.filter(e=>{let{id:n}=e;return n!==t})})),i={...n[0]},r={...i,meta:{...i.meta,pagination:{...i.meta.pagination,pageSize:i.meta.pagination.pageSize-1,total:(0,o.hj)(i.meta.pagination.total)?i.meta.pagination.total-1:i.meta.pagination.total}},data:i.data},a=n.slice(1);return{...e,pages:a?[r,...a]:[r]}},removeArtifact=async e=>{let{queryClient:t,artifactId:n}=e;await t.setQueriesData([{scope:"artifact",entity:"list"}],e=>removeArtifactFromCache(e,n))}},80890:function(e,t,n){"use strict";n.d(t,{Vw:function(){return i},hc:function(){return useInfiniteDocuments}});var o,i,r=n(82066),a=n(12825),s=n(93716),u=n(28905),c=n(15442),l=n(548),d=n(2025);(o=i||(i={})).USER="user",o.COMMUNITY="community",o.SUBJECT="subject";let p={sort:s.e9.recent.apiKey,filter:{},populate:["user"],pagination:{page:0,pageSize:20,withCount:!1}},documentsKey=e=>[{id:"documents",scope:"document",entity:"list",...(0,d.T)(p,e)}],fetchDocuments=async e=>{let{queryKey:[t],pageParam:n}=e,{sort:o,filter:i,populate:r,pagination:u}=t,l=(0,c.P)({sort:o,filter:i,populate:r,pagination:{...u,page:n||(null==u?void 0:u.page)}}),d=await (0,a._i)("/v2/documents".concat(l));return{...d,data:d.data.map(s.H)}},useInfiniteDocuments=e=>{var t,n,o,i;let{enabled:a,...s}=e,c=a&&(!!(null===(t=s.filter)||void 0===t?void 0:t.communityId)||!!(null===(n=s.filter)||void 0===n?void 0:n.communityId)&&!!s.filter.subjectId||!!(null===(o=s.filter)||void 0===o?void 0:o.uploadId)||!!(null===(i=s.filter)||void 0===i?void 0:i.userId));return(0,r.useInfiniteQuery)({queryKey:(0,l.I)(documentsKey(s),c),queryFn:fetchDocuments,getNextPageParam:u.H,enabled:c})}},20811:function(e,t,n){"use strict";n.d(t,{D:function(){return r},W:function(){return useFolder}});var o=n(9033),i=n(80890);let useFolder=e=>{let{uploadId:t}=e,{data:n,isLoading:o,isIdle:r}=(0,i.hc)({enabled:!!t,filter:{uploadId:t},pagination:{pageSize:9999}}),a=null==n?void 0:n.pages[0].data;return{folderDocuments:a,isIdle:r,isLoading:o}},r=o.Z},21085:function(e,t,n){"use strict";n.d(t,{Vq:function(){return useRoleAdminDocumentById}});var o=n(82066),i=n(12825);let adminDocumentKey=e=>{let{documentId:t}=e;return[{id:"admin-document",scope:"legacy-uploads",entity:"list",documentId:t}]},fetchAdminDocumentById=async e=>{let{queryKey:[{documentId:t}]}=e,n=await (0,i._i)("/v2/admin/document/".concat(t));return n.item},useRoleAdminDocumentById=e=>{let{enabled:t,...n}=e;return(0,o.useQuery)({queryKey:adminDocumentKey(n),queryFn:fetchAdminDocumentById,enabled:t&&void 0!==n.documentId})}},98200:function(e,t,n){"use strict";n.d(t,{g:function(){return useUnsaveDocument}});var o=n(82066),i=n(12825),r=n(44926),a=n(92351),s=n(56732);let unsaveDocument=async e=>{let{document:t}=e;return(0,i._i)("/v2/me/documents/".concat(t.id,"/bookmark"),{method:"delete"})},useUnsaveDocument=()=>{let e=(0,o.useQueryClient)(),{askAuth:t}=(0,r.S)();return(0,o.useMutation)(unsaveDocument,{onMutate:async n=>{let{document:o}=n;t(),await (0,s.gU)({queryClient:e,updater:(0,s.VR)({documentId:o.id,increment:-1})}),await e.cancelQueries((0,a.gE)({filter:{communityId:o.communityId,subjectId:o.subjectId}}));let i=await e.getQueryData((0,a.gE)({filter:{communityId:o.communityId,subjectId:o.subjectId}}));if(i){let t=i.filter(e=>{let{documentId:t}=e;return t!==o.id});await e.setQueryData((0,a.gE)({filter:{communityId:o.communityId,subjectId:o.subjectId}}),t)}return{previousData:i}},onError:async(t,n,o)=>{let{document:i}=n;(null==o?void 0:o.previousData)&&await e.setQueryData((0,a.gE)({filter:{communityId:i.communityId,subjectId:i.subjectId}}),o.previousData),(0,s.gU)({queryClient:e,updater:(0,s.VR)({documentId:i.id,increment:1})})},onSettled:async(t,n,o)=>{let{document:i}=o;await e.invalidateQueries((0,a.gE)({filter:{communityId:i.communityId,subjectId:i.subjectId}}))}})}},42257:function(e,t,n){"use strict";n.d(t,{B:function(){return useDeleteFile}});var o=n(31171),i=n(82066),r=n(12825),a=n(15442),s=n(26021),u=n(24304);let deleteFile=e=>{let{params:t,query:n}=e,o={};return void 0!=n.byCopyright&&(o.byCopyright=n.byCopyright),void 0!=n.removeMoney&&(o.removeMoney=n.removeMoney),void 0!=n.closeReports&&(o.closeReports=n.closeReports),void 0!=n.comment&&(o.comment=n.comment),(0,r._i)("/v2/document/".concat(t.documentId).concat((0,a.P)(o)),{method:"DELETE"})},useDeleteFile=()=>{let{t:e}=(0,o.qM)(),t=(0,i.useQueryClient)();return(0,i.useMutation)(deleteFile,{onMutate:()=>{(0,s.A)({title:"Borrando...",status:"info",duration:5e3})},onSuccess:(e,n)=>{let{params:o,extra:i}=n;(0,u.V)({queryClient:t,artifactId:"document-".concat(o.documentId)});let r=[{scope:"document",entity:"list",filter:{uploadId:i.uploadId}}];t.refetchQueries(r);let a=t.getQueriesData(r),c=a.flatMap(e=>{let[t,n]=e,o=null==n?void 0:n.pages;return(o||[]).flatMap(e=>{let{data:t}=e;return t})});c.length<=1&&(0,u.V)({queryClient:t,artifactId:"upload-".concat(i.uploadId)}),(0,s.A)({title:"Fichero borrado con \xe9xito.",status:"success",duration:5e3})},onError:t=>{(0,s.A)({title:"Error al borrar fichero.",description:e(t.key),status:"error",duration:5e3})}})}},92351:function(e,t,n){"use strict";n.d(t,{IV:function(){return useMeDocuments},g1:function(){return useMeSavedDocumentsById},gE:function(){return meDocumentsKey}});var o,i,r,a,s=n(82066),u=n(12825),c=n(56820),l=n(15442),d=n(2025),p=n(5261);(o=r||(r={})).recent="-createdAt",o.older="createdAt",(i=a||(a={})).user="user",i.document="document",i.documentUser="document.user",i.subject="subject";let m={sort:"-createdAt",filter:{},populate:["document","document.user"],pagination:{page:0,pageSize:9999,withCount:!1}},meDocumentsKey=e=>[{...p.gL,id:"me-documents",scope:"bookmark-document",entity:"list",...(0,d.T)(m,e)}],fetchMeDocuments=async e=>{let{queryKey:[t]}=e,{sort:n,filter:o,populate:i,pagination:r}=t,a=(0,l.P)({sort:n,filter:o,populate:i,pagination:r}),s=await (0,u._i)("/v2/me/documents/bookmark".concat(a));return s.data.map(c.q)},useMeDocuments=e=>{let{data:t}=(0,p.CN)();return(0,s.useQuery)({queryKey:meDocumentsKey(e),queryFn:fetchMeDocuments,enabled:!!t})},selectSavedDocumentsById=e=>e.reduce((e,t)=>{let{documentId:n}=t;return{...e,[n]:!0}},{}),useMeSavedDocumentsById=e=>{let{enabled:t,...n}=e,{data:o}=(0,p.CN)();return(0,s.useQuery)({queryKey:meDocumentsKey(n),queryFn:fetchMeDocuments,enabled:!!o&&t,select:selectSavedDocumentsById})}},9757:function(e,t,n){"use strict";var o=n(52322),i=n(8283),r=n(91012),a=n(61720);t.Z=e=>{let{document:t,...n}=e;return(0,o.jsxs)(i.U,{spacing:"1",mr:"0.5",...n,children:[(0,o.jsx)(a.$,{extension:t.extension,size:"12px"}),(0,o.jsx)(r.x,{textTransform:"uppercase",fontSize:"12px",children:t.extension.original})]})}},1096:function(e,t,n){"use strict";var o=n(52322),i=n(31171),r=n(8283),a=n(43638),s=n(91012),u=n(52742);t.Z=e=>{let{numPages:t,...n}=e,{t:c}=(0,i.qM)();return(0,o.jsxs)(r.U,{spacing:"1",fontSize:"12px",...n,children:[(0,o.jsx)(a.J,{as:u.vrJ}),(0,o.jsx)(s.x,{fontFamily:"mono",noOfLines:1,width:"max-content","data-testid":"document-card-num-pages",children:c("document-card-num-pages",{pages:t})})]})}},90221:function(e,t,n){"use strict";n.d(t,{Z:function(){return shared_Stats}});var o=n(52322),i=n(8283),r=n(92351),a=n(61824),s=n(52742);let BookmarksMetric=e=>{let{document:t}=e,{data:n}=(0,r.g1)({filter:{communityId:null==t?void 0:t.communityId,subjectId:null==t?void 0:t.subjectId},enabled:!!t}),i=null==n?void 0:n[t.id];return(0,o.jsx)(a.Z,{icon:i?s.KHK:s.jlo,label:t.numBookmarks})};var u=n(78611),c=n(39480),shared_Stats=e=>{let{document:t,...n}=e;return(0,o.jsxs)(i.U,{...n,children:[(0,o.jsx)(c.V,{moneyIsVisible:void 0!==t.money&&null!==t.money,money:t.money,isMonetizable:t.isMonetizable||!1}),t.isMonetizable&&(0,o.jsx)(u.K,{item:t}),(0,o.jsx)(BookmarksMetric,{document:t})]})}},78611:function(e,t,n){"use strict";n.d(t,{K:function(){return DownloadsMetric}});var o=n(52322),i=n(61824),r=n(65186);let DownloadsMetric=e=>{let{item:t}=e;return(0,o.jsx)(i.Z,{icon:r.OMZ,label:t.numPaidDownloads})}},26770:function(e,t,n){"use strict";var o=n(52322),i=n(31171),r=n(66946),a=n(91012);t.Z=e=>{let{category:t,title:n,type:s,...u}=e,{t:c}=(0,i.qM)(),l=(null==s?void 0:s.toLowerCase())===r.lr.PUBLICATION,d=s===r.lr.DOUBT||l?"socials.".concat(s.toLowerCase()):t;return(0,o.jsxs)(a.x,{textAlign:"left",fontSize:"xs",fontWeight:"medium",wordBreak:"break-all",...u,children:[(0,o.jsx)(a.x,{as:"span",color:"wGray.500",children:c(d)}),!l&&(0,o.jsx)(a.x,{as:"span",children:" - ".concat(n)})]})}},61824:function(e,t,n){"use strict";var o=n(52322),i=n(8283),r=n(43638),a=n(91012);t.Z=e=>{let{icon:t,label:n=0,...s}=e;return(0,o.jsxs)(i.U,{spacing:"1px",color:"wBlack.200",fontSize:"12px",...s,children:[(0,o.jsx)(r.J,{as:t}),(0,o.jsx)(a.x,{fontFamily:"mono",children:n})]})}},39480:function(e,t,n){"use strict";n.d(t,{V:function(){return MoneyGenerated}});var o=n(52322),i=n(31171),r=n(152),a=n(56241),s=n(4036);let MoneyGenerated=e=>{let{moneyIsVisible:t,money:n=0,isMonetizable:u=!1}=e,{t:c}=(0,i.qM)(),l=(0,r.h)();return t?(0,o.jsx)(a.u,{label:c(u?"monetizable-text":"no-monetizable-text"),fontSize:"xs","data-testid":"monetizable-option-selector",children:(0,o.jsx)(s.C,{fontFamily:"mono",color:u?"green.500":"orange.600",bgColor:u?"green.50":"orange.50",fontSize:"8px",lineHeight:"9px",fontWeight:"regular",px:"4px",py:"1.5px",children:l({amount:n})})}):null}},99022:function(e,t,n){"use strict";n.d(t,{u:function(){return useAdminDeleteFileButton}});var o=n(52322),i=n(31171),r=n(21085),a=n(42257),s=n(60489),u=n(52742);let useAdminDeleteFileButton=e=>{let{documentId:t}=e,{t:n}=(0,i.qM)(),{mutateAsync:c}=(0,a.B)(),{data:l}=(0,r.Vq)({documentId:t,enabled:void 0!==t}),d={caption:n("delete"),icon:(0,o.jsx)(u.Bhs,{})};if(void 0===l)return{...d,onClick:()=>{},showSkeleton:!0};let onDelete=e=>{let{values:t}=e;return c({params:{documentId:l.id},query:{byCopyright:t.copyright,removeMoney:t.removeMoney,closeReports:t.closeReport,comment:t.comments},extra:{}})};return{...d,onClick:()=>{s.Ln.onOpen({name:l.name,type:"document",onDelete,money:l.money})},showSkeleton:!1}}},78981:function(e,t,n){"use strict";n.d(t,{t:function(){return useSaveButton}});var o=n(52322),i=n(31171),r=n(2784),a=n(91330),s=n(82066),u=n(12825),c=n(44926),l=n(92351),d=n(56732);let saveDocument=async e=>{let{document:t}=e;return(0,u._i)("/v2/me/documents/".concat(t.id,"/bookmark"),{method:"put"})},useSaveDocument=()=>{let e=(0,s.useQueryClient)(),{askAuth:t}=(0,c.S)();return(0,s.useMutation)(saveDocument,{onMutate:async n=>{let{document:o}=n;t(),await (0,d.gU)({queryClient:e,updater:(0,d.VR)({documentId:o.id,increment:1})}),await e.cancelQueries((0,l.gE)({filter:{communityId:o.communityId,subjectId:o.subjectId}}));let i=await e.getQueryData((0,l.gE)({filter:{communityId:o.communityId,subjectId:o.subjectId}}));if(i){let t=[{id:Date.now().valueOf(),userId:0,documentId:o.id,createdAt:Date.now().toString(),user:void 0,document:o},...i];await e.setQueryData((0,l.gE)({filter:{communityId:o.communityId,subjectId:o.subjectId}}),t)}return{previousData:i}},onError:async(t,n,o)=>{let{document:i}=n;(null==o?void 0:o.previousData)&&await e.setQueryData((0,l.gE)({filter:{communityId:i.communityId,subjectId:i.subjectId}}),o.previousData),(0,d.gU)({queryClient:e,updater:(0,d.VR)({documentId:i.id,increment:-1})})},onSettled:async(t,n,o)=>{let{document:i}=o;await e.invalidateQueries((0,l.gE)({filter:{communityId:i.communityId,subjectId:i.subjectId}}))}})};var p=n(98200),m=n(8799);let useSaveButton=e=>{let{document:t}=e,{t:n}=(0,i.qM)(),{data:s,isLoading:u}=(0,l.g1)({filter:{communityId:null==t?void 0:t.communityId,subjectId:null==t?void 0:t.subjectId},enabled:!!t}),c=t&&(null==s?void 0:s[t.id]),{mutate:d}=useSaveDocument(),{mutate:h}=(0,p.g)(),y=(0,r.useCallback)(()=>{a.hotjar.initialized()&&a.hotjar.event("unbookmark-document"),t&&h({document:t})},[t,h]),x=(0,r.useCallback)(()=>{a.hotjar.initialized()&&a.hotjar.event("bookmark-document"),t&&d({document:t})},[t,d]);return{isSaved:c,showSkeleton:!t,onClick:c?y:x,caption:n(c?"document-unsave-button":"save"),icon:c?(0,o.jsx)(m.M3k,{}):(0,o.jsx)(m.flH,{}),colorScheme:c?"blue":void 0,isLoading:u}}},40883:function(e,t,n){"use strict";var o=n(52322),i=n(2784),r=n(27302),a=n(49980),s=n(61720);t.Z=e=>{let{document:t,w:n="64px",h:u="88px",...c}=e,[l,d]=(0,i.useState)((null==t?void 0:t.thumbnailUrl)?"loading":"error"),p=["loading","error"].includes(l)?(0,s.L)(null==t?void 0:t.extension):"none";return(0,o.jsx)(r.M,{w:n,h:u,bg:p,filter:"drop-shadow(0px 4px 20px rgba(0, 0, 0, 0.08))",overflow:"hidden",...c,children:"error"===l?(0,o.jsx)(s.$,{extension:null==t?void 0:t.extension,size:"32px"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.E,{opacity:"loading"===l?0:.2,src:null==t?void 0:t.thumbnailUrl,alt:null==t?void 0:t.name,position:"absolute",objectFit:"cover",w:n,h:u,filter:"blur(5px)",transition:"opacity 0.3s",loading:"lazy"}),(0,o.jsx)(a.E,{opacity:"loading"===l?0:1,src:null==t?void 0:t.thumbnailUrl,alt:null==t?void 0:t.name,objectFit:"contain",w:n,h:u,transition:"opacity 0.3s",loading:"lazy",onLoad:()=>d("success"),onError:()=>d("error")})]})})}},78375:function(e,t,n){"use strict";var o=n(52322),i=n(13061);t.Z=e=>(0,o.jsx)(i.Vp,{variant:"solid",background:"#026",size:"xs",paddingX:"4px",fontWeight:"400",...e,children:"New"})},18339:function(e,t,n){"use strict";var o=n(52322),i=n(11919),r=n(26488),a=n(94659),s=n(24616),u=n(8283);t.Z=e=>{let{id:t,count:n=1,type:c,...l}=e;return"document-row"===c?(0,o.jsx)(o.Fragment,{children:Array.from({length:n}).map((e,n)=>(0,o.jsxs)(i.k,{width:"full",px:"4",py:"2.5",gap:"4",alignItems:"center",...l,children:[(0,o.jsx)(r.O,{w:"28px",h:"28px",borderRadius:"sm"}),(0,o.jsxs)(a.g,{w:"full",justifyContent:"space-between",alignItems:"start",children:[(0,o.jsx)(s.N,{noOfLines:1,width:"full"}),(0,o.jsxs)(u.U,{w:"full",justifyContent:"space-between",children:[(0,o.jsx)(s.N,{noOfLines:1,w:"100px"}),(0,o.jsx)(s.N,{noOfLines:1,w:"60px"})]})]})]},"".concat(t,"-").concat(n)))}):"document-row-thumbnail"===c?(0,o.jsx)(o.Fragment,{children:Array.from({length:n}).map((e,n)=>(0,o.jsxs)(i.k,{width:"full",px:"4",py:"2.5",gap:"4",...l,children:[(0,o.jsx)(r.O,{w:"72.2px",h:"88px",borderRadius:"sm"}),(0,o.jsxs)(a.g,{w:"full",justifyContent:"space-between",alignItems:"start",children:[(0,o.jsx)(s.N,{noOfLines:2,w:"full"}),(0,o.jsxs)(u.U,{w:"full",justifyContent:"space-between",children:[(0,o.jsx)(s.N,{noOfLines:1,w:"100px"}),(0,o.jsx)(s.N,{noOfLines:1,w:"60px"})]})]})]},"".concat(t,"-").concat(n)))}):"document-card"===c?(0,o.jsx)(o.Fragment,{children:Array.from({length:n}).map((e,n)=>(0,o.jsxs)(i.k,{width:"full",p:"4",gap:"4",...l,children:[(0,o.jsx)(r.O,{w:"70px",h:"107px",flexShrink:"0",borderRadius:"sm"}),(0,o.jsxs)(a.g,{w:"full",justifyContent:"space-between",alignItems:"start",children:[(0,o.jsx)(s.N,{noOfLines:2,w:"full"}),(0,o.jsx)(s.N,{noOfLines:1,w:"60px"}),(0,o.jsxs)(u.U,{w:"full",justifyContent:"space-between",children:[(0,o.jsxs)(i.k,{gap:2,children:[(0,o.jsx)(r.O,{w:"21px",h:"21px",rounded:"full"}),(0,o.jsx)(r.O,{w:"21px",h:"21px",rounded:"full"})]}),(0,o.jsx)(s.N,{noOfLines:1,w:"100px"})]})]})]},"".concat(t,"-").concat(n)))}):(0,o.jsx)(o.Fragment,{children:Array.from({length:n}).map((e,n)=>(0,o.jsx)(r.O,{w:"full",...l},"".concat(t,"-").concat(n)))})}},44638:function(e,t,n){"use strict";n.d(t,{a:function(){return UserBase}});var o=n(52322),i=n(152),r=n(75787),a=n(58524),s=n(89140),u=n(89361),c=n(8283),l=n(71354),d=n(91012),p=n(13061);let UserBase=e=>{let{user:t,rankingPosition:n,lastYearPopularity:m,showMoney:h=!0,pricePerClass:y,...x}=e,v=(0,i.h)(),g=(null==t?void 0:t.displayMoney)&&t.totalMoney?"".concat(v({amount:t.totalMoney})," \xb7 "):"",f=m&&(0,u.j)(m);return t?(0,o.jsxs)(c.U,{spacing:"3",textAlign:"left",width:"100%",...x,children:[(0,o.jsx)(r.Y,{avatarUrl:t.avatarUrl,avatarAlt:t.nickname,rankingPosition:n,size:"md"}),(0,o.jsxs)(l.K,{direction:"column",spacing:"0",width:"calc(100% - 50px)",children:[(0,o.jsxs)(c.U,{spacing:"6px",children:[(0,o.jsx)(d.x,{fontSize:"xs",fontWeight:"normal",noOfLines:1,children:t.nickname}),!!t.subscriptionTier&&(0,o.jsx)(a.Z,{tier:t.subscriptionTier}),!!t.verifiedSubscriptionTier&&(0,o.jsx)(s.X,{tier:t.verifiedSubscriptionTier,size:16})]}),(0,o.jsxs)(c.U,{children:[h&&(0,o.jsx)(d.x,{fontSize:"10px",color:"gray.600",children:g}),!!f&&(0,o.jsx)(d.x,{fontSize:"10px",color:"gray.600",children:f}),!!y&&(0,o.jsx)(p.Vp,{size:"xs",background:"#E5F9EE",color:"#00C853",children:"".concat(y,"â‚¬/h")})]})]})]}):null}},55437:function(e,t,n){"use strict";n.d(t,{v:function(){return WuolerPopover}});var o=n(52322),i=n(2784),r=n(73202),a=n(75944),s=n(5389),u=n(56915),c=n(82962),l=n(64827),d=n(92619),p=n(2167),m=n(39675),h=n(51434),y=n(94301),x=n(91333),v=n(83897),g=n(66946),f=n(5632),b=n(5261),j=n(97574),I=n(31171),_=n(62901),S=n(7598),w=n(8283),k=n(91012),C=n(69316),B=n(78375);let UserPopoverTeacherBanner=e=>{let{teacher:t,onClose:n}=e,{t:i}=(0,I.qM)(),{data:r}=(0,b.Pi)(),{show:a}=(0,S.v)(),s=null==t?void 0:t.userId.toString();return((0,_.K)({location:"popover",owner_id:s}),r&&r.id!==(null==t?void 0:t.userId)&&t.status===g.m1.ACTIVE)?(0,o.jsxs)(w.U,{spacing:"12px",children:[(0,o.jsx)(B.Z,{}),(0,o.jsx)(k.x,{fontWeight:"400",fontSize:"12px",children:(0,o.jsx)(I.T,{keyName:"popover.description-teacher",params:{strong:(0,o.jsx)("strong",{style:{fontWeight:"600"}}),button:(0,o.jsx)(C.z,{variant:"link",size:"sm",fontWeight:"400",color:"black",textDecor:"underline",onClick:()=>{a({teacher:t,source:"popover link"}),n()}})}})})]}):null};var D=n(14008),M=n(77904),P=n(39831),z=n(84858),E=n(44638),T=n(68860),W=n(71354),q=n(11919),U=n(26488),N=n(91330),R=n(80890),A=n(69539),O=n(77620),F=n(28035),K=n(60489),Q=n(14538),L=n(9767),V=n(40110),Z=n(56467),G=n(18339),H=n(61720);let RecentActivity=e=>{var t,n,i;let r,{user:a,onClose:s,...u}=e,{t:c}=(0,I.qM)(),l=(0,f.useRouter)(),{communitySlug:d,subjectSlug:p}=(0,A.hb)(),m=p?"in_subject":d?"in_community":"other",{data:h}=(0,O.Jk)({params:"in_community"===m&&d?{slug:d}:{id:(null===(t=l.query)||void 0===t?void 0:t.communityId)?Number(l.query.communityId):void 0}}),{data:y}=(0,F.UQ)("in_subject"===m?{communitySlug:null==h?void 0:h.slug,subjectSlug:p}:{});r="in_subject"===m?{communityId:null==y?void 0:y.communityId,subjectId:null==y?void 0:y.subjectId,course:null==y?void 0:y.course,userId:a.id}:"in_community"===m?{communityId:null==h?void 0:h.id,userId:a.id}:{communityId:a.defaultCommunityId||void 0,userId:a.id};let{data:x,isLoading:v}=(0,R.hc)({enabled:!0,filter:r,populate:[],pagination:{pageSize:3}}),g=null==x?void 0:x.pages[0].data;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(V.i,{color:"gray.100"}),(0,o.jsxs)(W.K,{children:[(0,o.jsxs)(w.U,{spacing:"2",justifyContent:"space-between",mb:"2",...u,children:[(0,o.jsx)(k.x,{textStyle:"overline",children:(0,o.jsx)(I.T,{keyName:"user-popover-last-activity",params:{context:m}})}),"in_subject"===m&&(0,o.jsx)(Z.p,{href:(0,L.y)({subjectSlug:p},{communityId:null==y?void 0:y.communityId,f_course:null==y?void 0:y.course,f_study:(null==y?void 0:null===(n=y.community.metadata)||void 0===n?void 0:n.pfIsStudyGrouping)?null==y?void 0:y.studyId:void 0,f_community:(null==y?void 0:null===(i=y.community.metadata)||void 0===i?void 0:i.pfIsStudyGrouping)?void 0:null==y?void 0:y.communityId,user:a.id.toString()}),children:(0,o.jsx)(C.z,{variant:"link",size:"sm",color:"gray.600",fontWeight:"bold",onClick:()=>{N.hotjar.initialized()&&N.hotjar.event("user-popover-see-all-documents"),s()},children:c("see-more")})})]}),v?(0,o.jsx)(G.Z,{id:"popover-recent-activity",type:"document-row",count:3,background:"#f4f4f4",borderRadius:"md",padding:"2"}):null,(null==g?void 0:g.length)===0?(0,o.jsx)(k.x,{fontSize:"xs",children:c("user-popover-no-activity")}):null,null==g?void 0:g.map(e=>(0,o.jsxs)(q.k,{onClick:()=>K.lC.onOpen({documentId:e.id}),cursor:"pointer",background:"#f4f4f4",borderRadius:"md",padding:"2",gap:"4",alignItems:"center",children:[(0,o.jsx)(H.$,{extension:e.extension,size:"28px"}),(0,o.jsxs)(W.K,{spacing:"2px",flex:"1",noOfLines:1,children:[(0,o.jsxs)(k.x,{color:"gray.700",fontSize:"xs",noOfLines:1,children:[e.category," - ",e.name]}),(0,o.jsx)(k.x,{color:"gray.500",fontSize:"xs",children:c("uploaded-date",{date:(0,Q.SC)(e.createdAt)})})]})]},e.id))]})]})},Content=e=>{let{user:t,onClose:n,...i}=e,r=(0,f.useRouter)(),{data:a}=(0,b.Pi)(),{data:s}=(0,b.wo)({userId:t.id}),{data:u,isLoading:c}=(0,D.MJ)({enabled:t.isTeacher,userId:t.id}),l=!!u&&u.status===g.m1.ACTIVE,{shouldSeeSandbox:d}=(0,M.U)(),p=d?(0,P.U)({userSlug:t.nickname}):(0,z.d)({userSlug:t.nickname});return(0,o.jsxs)(W.K,{spacing:"4",...i,children:[(0,o.jsxs)(q.k,{justify:"space-between",alignItems:"center",mt:"2",children:[(0,o.jsx)("button",{onClick:e=>{e.stopPropagation(),r.push((null==t?void 0:t.id)!==4298675?p:"https://wuolah.com/utinder-universidad-tinder/universidad-tinder?utm_source=button&utm_medium=webwuolah&utm_campaign=tinder&utm_content=ranking&utm_term=button-webwuolah-tinder-ranking")},style:{maxWidth:a&&l?"calc(100% - 200px)":"calc(100% - 60px)",flexGrow:1},children:(0,o.jsx)(E.a,{user:t,showMoney:!1})}),(0,o.jsxs)(q.k,{gap:"8px",children:[l&&(0,o.jsx)(j.c,{teacher:u,source:"popover button",onClose:n}),(0,o.jsx)(T.Z,{user:t,size:"sm"})]})]}),!!a&&l&&(0,o.jsx)(UserPopoverTeacherBanner,{teacher:u,onClose:n}),!s&&(c?(0,o.jsx)(U.O,{h:"150px"}):(0,o.jsx)(RecentActivity,{user:t,onClose:n}))]})},WuolerPopover=e=>{let{user:t,children:n,containerRef:g,...f}=e,{isMobile:b}=(0,r.B)(),j=(0,a.q)();return b?(0,o.jsxs)(o.Fragment,{children:[i.Children.map(n,(e,t)=>(0,i.isValidElement)(e)&&0===t?(0,i.cloneElement)(e,{onClick:e=>{e.stopPropagation(),j.onOpen()}}):e),j.isOpen&&(0,o.jsxs)(s.u_,{preserveScrollBarGap:!0,isOpen:j.isOpen,onClose:j.onClose,children:[(0,o.jsx)(u.Z,{}),(0,o.jsxs)(c.h,{mt:"auto",mb:"0",borderTopRadius:"16px",children:[(0,o.jsx)(l.o,{}),(0,o.jsx)(d.x,{}),(0,o.jsx)(p.f,{padding:"6",onClick:e=>{e.stopPropagation()},children:(0,o.jsx)(Content,{user:t,onClose:j.onClose,...f})})]})]})]}):(0,o.jsx)(m.J,{placement:"left-start",isLazy:!0,children:e=>{let{isOpen:i,onClose:r}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.x,{children:n}),i&&(0,o.jsx)(y.h,{containerRef:g,children:(0,o.jsx)(x.y,{borderRadius:"24px",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.08)",w:"376px",children:(0,o.jsx)(v.b,{p:"6",onClick:e=>{e.stopPropagation()},children:(0,o.jsx)(Content,{user:t,onClose:r,...f})})})})]})}})}},62901:function(e,t,n){"use strict";n.d(t,{K:function(){return useTutoringViewedEvent}});var o=n(2784),i=n(91330),r=n(79045);let a="tutoring_viewed",useTutoringViewedEvent=e=>{let{community_slug:t,subject_slug:n,location:s,owner_id:u}=e;(0,o.useEffect)(()=>{var e;null===r.h||void 0===r.h||null===(e=r.h.dataLayer)||void 0===e||e.push({event:a,community_slug:t,subject_slug:n,location:s,owner_id:u}),i.hotjar.initialized()&&i.hotjar.event("".concat(a,":").concat(s))},[t,n,s,u])}},14008:function(e,t,n){"use strict";n.d(t,{MJ:function(){return useTeacher},Ul:function(){return teacherKey}});var o=n(82066),i=n(12825);let teacherKey=e=>{let{userId:t}=e;return[{id:"teacher",scope:"classroom",entity:"detail",userId:t}]},fetchTeacher=async e=>{let{queryKey:[{userId:t}]}=e,n=await (0,i._i)("/v2/live-classrooms/teachers/".concat(t));return n.item},useTeacher=e=>{let{enabled:t,...n}=e;return(0,o.useQuery)({queryKey:teacherKey(n),queryFn:fetchTeacher,enabled:t&&void 0!==n.userId})}},97574:function(e,t,n){"use strict";n.d(t,{c:function(){return BookTeacherClassButton}});var o=n(52322),i=n(31171),r=n(66946),a=n(5261),s=n(7598),u=n(69316);let BookTeacherClassButton=e=>{let{teacher:t,source:n,onClose:c}=e,{t:l}=(0,i.qM)(),{data:d}=(0,a.Pi)(),{show:p}=(0,s.v)();return d&&d.id!==(null==t?void 0:t.userId)&&t.status===r.m1.ACTIVE?(0,o.jsx)(u.z,{variant:"outline",size:"sm",borderColor:"black",onClick:()=>{p({teacher:t,source:n}),c&&c()},"data-testid":"request-class",children:l("request-class")}):null}},7598:function(e,t,n){"use strict";n.d(t,{v:function(){return useBookTeacherClassModal}});var o=n(31171),i=n(5261),r=n(60489);let useBookTeacherClassModal=()=>{let{t:e}=(0,o.qM)(),{data:t}=(0,i.Pi)();return{show:n=>{let{teacher:o,source:i}=n;if(t&&(null==t?void 0:t.phoneArea)&&(null==t?void 0:t.phoneNumber)){r.kq.onOpen({teacher:o,source:i});return}r.C1.onOpen({onSuccess:()=>{r.kq.onOpen({teacher:o,source:i})},description:e("classroom.request-phone-description")})}}}},58524:function(e,t,n){"use strict";n.d(t,{Z:function(){return SubscriptionBadgeWithPopover}});var o=n(52322),i=n(31171),r=n(66946),a=n(5632),s=n(5261),u=n(65242),c=n(44683),l=n(19519),d=n(92251),p=n(8757),m=n(59519),h=n(39675),y=n(51434),x=n(94301),v=n(91333),g=n(83897),f=n(73071),b=n.n(f);let SubscriptionBadgeWithPopover=e=>{let t,n,{tier:f}=e,j=(0,a.useRouter)(),{t:I}=(0,i.qM)(),{data:_}=(0,s.Pi)(),{data:S}=(0,u.p)(),{data:w}=(0,c.CA)({currency:(null==S?void 0:S.currency)||r.wA.EUR,enabled:!0});switch(f){case r.DW.TIER_1:t="".concat("https://cdn.wuolahservices.com","/pro/planTurboIcon.png"),n="turbo";break;case r.DW.TIER_2:t="".concat("https://cdn.wuolahservices.com","/pro/planProIcon.png"),n="pro";break;case r.DW.TIER_3:t="".concat("https://cdn.wuolahservices.com","/pro/planProPlusIcon.png"),n="pro+"}let k=l.H.USER_BADGE,C="UserBadgePopover",B=null==w?void 0:w.find(e=>e.tier===f);return(0,d.x1)({enabled:!!B,listName:k,component:C,products:null==B?void 0:B.prices.map(e=>({product:B,price:e}))}),(0,o.jsx)(h.J,{isLazy:!0,children:e=>{let{isOpen:r}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y.x,{children:(0,o.jsx)("div",{className:b().popoverTrigger,onClick:e=>{e.stopPropagation()},children:(0,o.jsx)("img",{src:t,alt:"",className:b().badge})})}),r&&(0,o.jsx)(x.h,{children:(0,o.jsx)(v.y,{borderRadius:"12px",children:(0,o.jsx)(g.b,{padding:"0px",children:(0,o.jsxs)("div",{className:b().popoverBodyContainer,children:[(0,o.jsxs)("div",{className:b().textContainer,children:[(0,o.jsxs)("p",{className:b().title,children:[I("word-user")," ",(0,o.jsx)("span",{className:b().plan,children:n})]}),(0,o.jsx)("p",{className:b().description,children:(0,o.jsx)(i.T,{keyName:"subscription-badge-popover.description",params:{plan:n,span:(0,o.jsx)("span",{className:b().plan})}})})]}),(null==_?void 0:_.subscriptionTier)!==f&&(0,o.jsx)("div",{className:b().buttonContainer,children:(0,o.jsx)(p.g,{variant:"text",onClick:e=>{e.stopPropagation();let t=null==w?void 0:w.find(e=>e.tier===f);if(!t)return;let o=t.prices.find(e=>"monthly"===e.interval);o&&((0,d.TQ)({product:t,price:o,listName:k,component:C}),j.push((0,m.m)({tab:"pro+"===n?"proplus":n,listName:k})))},children:I("read-more")})})]})})})})]})}})}},56820:function(e,t,n){"use strict";n.d(t,{q:function(){return normalizeBookmarkDocument}});var o=n(93716),i=n(98665);let normalizeBookmarkDocument=e=>({...e,user:e.user?(0,i.B)(e.user):void 0,document:e.document?(0,o.H)(e.document):void 0})},89361:function(e,t,n){"use strict";n.d(t,{j:function(){return getExperience}});let getExperience=e=>new Intl.NumberFormat("en",{notation:"compact"}).format(e).concat(" XP")},14360:function(e,t,n){"use strict";n.d(t,{R:function(){return buildDocumentPath}});var o=n(46725),i=n(70976);let build=(e,t)=>{let n=o.R["/apuntes/[subjectSlug]/[documentSlug]"],r=o.R["/sandbox/apuntes/[subjectSlug]/[documentSlug]"];if(!e.subjectSlug||!e.documentSlug)return(0,i.qu)();let a={subjectSlug:e.subjectSlug,documentSlug:e.documentSlug},s=(0,i.Tx)(n,a);if(e.shouldSeeSandbox){let e=(0,i.Tx)(r,a);return(0,i.nc)(e,t)}return(0,i.nc)(s,t)},buildDocumentPath=(e,t)=>build(e,t)},9033:function(e,t,n){"use strict";n.d(t,{Z:function(){return usePaginator}});var o=n(2784),i=n(22814);let usePaginator=e=>{let{items:t=[],initialSelectedItem:n}=e,r=(0,i.D)(n),{initialSelectedItemIndex:a,initialItem:s,initialSelectedItemId:u}=(0,o.useMemo)(()=>{if(!n)return{initialSelectedItemIndex:0,initialItem:void 0,initialSelectedItemId:void 0};if("object"==typeof n){let e=t.findIndex(e=>e.id===n.id);return{initialSelectedItemIndex:e,initialItem:n,initialSelectedItemId:n.id}}let e=t.findIndex(e=>e.id===n),o=t[e];return{initialSelectedItemIndex:e,initialItem:o,initialSelectedItemId:n}},[t,n]),[c,l]=(0,o.useState)(a);(0,o.useEffect)(()=>{let e=-1===c&&n,o=r!==n;if(e||o){let e=t.findIndex(e=>e.id===u);l(e)}},[t,u,n,r,l]);let d=t.length-1,p=0===c,m=c===d,h=(0,o.useCallback)(()=>{let e=Math.max(c-1,0),n=t[e];return l(e),n},[c,0,t,l]),y=(0,o.useCallback)(()=>{let e=Math.min(c+1,d),n=t[e];return l(e),n},[c,d,t,l]),x=(0,o.useCallback)(e=>{let n=t.findIndex(t=>t.id===e);l(Math.max(n,0))},[t,l,0]);return{items:t,initialItem:s,currentItem:t?t[c]:void 0,setCurrentItem:x,isFirst:p,next:y,previous:h,isLast:m,pages:{current:c+1,total:d+1}}}},57851:function(e,t,n){"use strict";n.d(t,{S:function(){return useShare}});var o=n(31171),i=n(2784),r=n(98694),a=n(18761);let useShare=e=>{let{url:t=""}=e,{t:n}=(0,o.qM)(),{hasCopied:s,onCopy:u,setValue:c}=(0,a.V)(t);return(0,i.useEffect)(()=>{c(t),!0===s&&(0,r.N)({supportingText:n("share-toast-title")})},[s,n,c,t]),{onShare:u}}},73071:function(e){e.exports={"o-typ-body-3":"SubscriptionBadgeWithPopover_o-typ-body-3__H0WMo","o-typ-body-2":"SubscriptionBadgeWithPopover_o-typ-body-2__DdKnx",popoverBodyContainer:"SubscriptionBadgeWithPopover_popoverBodyContainer__NP__8",textContainer:"SubscriptionBadgeWithPopover_textContainer__TtDZx",description:"SubscriptionBadgeWithPopover_description__8bOnS","o-typ-body-1":"SubscriptionBadgeWithPopover_o-typ-body-1__Ez3P3","o-typ-label-3":"SubscriptionBadgeWithPopover_o-typ-label-3__TbEjY","o-typ-label-2":"SubscriptionBadgeWithPopover_o-typ-label-2__MGWQQ","o-typ-label-2-b":"SubscriptionBadgeWithPopover_o-typ-label-2-b__lrjxp","o-typ-label-1":"SubscriptionBadgeWithPopover_o-typ-label-1__RoHsp","o-typ-label-1-b":"SubscriptionBadgeWithPopover_o-typ-label-1-b__Y9dN9","o-typ-title-3":"SubscriptionBadgeWithPopover_o-typ-title-3__gfNJW",title:"SubscriptionBadgeWithPopover_title__vMd8H","o-typ-title-2":"SubscriptionBadgeWithPopover_o-typ-title-2__aVTCp","o-typ-title-2-b":"SubscriptionBadgeWithPopover_o-typ-title-2-b__xhdMh","o-typ-title-1":"SubscriptionBadgeWithPopover_o-typ-title-1__bUfRT","o-typ-title-1-b":"SubscriptionBadgeWithPopover_o-typ-title-1-b__8hS_v","o-typ-header-3":"SubscriptionBadgeWithPopover_o-typ-header-3__OQAX3","o-typ-header-3-b":"SubscriptionBadgeWithPopover_o-typ-header-3-b__j5NZ6","o-typ-header-2":"SubscriptionBadgeWithPopover_o-typ-header-2__nbEds","o-typ-header-1":"SubscriptionBadgeWithPopover_o-typ-header-1__qGrgJ","o-typ-display-3":"SubscriptionBadgeWithPopover_o-typ-display-3__vMG2c","o-typ-display-2":"SubscriptionBadgeWithPopover_o-typ-display-2__no_M0","o-typ-display-1":"SubscriptionBadgeWithPopover_o-typ-display-1__hI3_d",popoverTrigger:"SubscriptionBadgeWithPopover_popoverTrigger__lC_7o",badge:"SubscriptionBadgeWithPopover_badge__yHu6F",buttonContainer:"SubscriptionBadgeWithPopover_buttonContainer__DQZy_",plan:"SubscriptionBadgeWithPopover_plan__yRzGg"}}}]);